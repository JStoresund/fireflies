<html>
  <head>
    <title>SOCKET</title>
  </head>

  <body id="color"></body> 

  <script type="module">
    import { io } from 'https://cdn.socket.io/4.3.2/socket.io.esm.min.js';

    let body = document.querySelector('body');

    const socket = io();

    var felt=localStorage.getItem("felt");
    var radNummer=localStorage.getItem("radNummer");
    var seteNummer=localStorage.getItem("seteNummer");
    
    socket.on('connect', () => {
      console.log('Connected to server');
      socket.emit("build:addUser", felt, radNummer, seteNummer);
    });

    // custom event that listens for colorchange
    socket.on('update:color', (data) => {
      console.log('New color: ' + data);
      body.style.backgroundColor = data;
    });

    socket.on('disconnect', () => {
      console.log('Disconnected from server');
      socket.emit("remove:removeUser", sete, radNummer, seteNummer);
    });


    let colors = ["#fd5b78", "#50bfe6", "#ffcc33", "#ff9933", "#ee34d2", "#66ff66", "#ff6eff"];
    const setRandomColor = () => {
      body.style.backgroundColor=colors[Math.floor(Math.random()*colors.length)];
    }

    setInterval(setRandomColor, 500);

    

  </script>
</html>